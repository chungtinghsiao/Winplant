<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>穩植牙體技術所</title>
</head>
<body>
    loading
</body>
<script>
    const signupUrl = 'https://airtable.com/app7l9YqqKFPrJkM6/pag6mDNazR41z5TqB/form';
    
    function getDecodedState() {
        const params = new URLSearchParams(window.location.search);
        const encodedState = params.get('liff.state');
        if (encodedState) {
            const decodedState = decodeURIComponent(encodedState);
            return decodedState;
        } else {
            return null;
        }
    }

    let isSignupedUser = false;
    // check if signup already?

    const state = getDecodedState();

    if (state === '/signup') {
        if (!isSignupedUser) {
            // go to miniextensions signup form
            // redirect or embed
        } else {
            // ?
        }
    }
    if (state === '/make-an-order') {
        if (!isSignupedUser) {
            // signup first
            // then wait
        }
        // go to miniextensions order form
        // redirect or embed
    }
    if (state === '/track-orders') {
        if (!isSignupedUser) {
            // signup first
            // then wait
        }
        // go to miniextensions portal
        // filter with not completed orders
        // redirect or embed
    }
    if (state === '/view-history-orders') {
        if (!isSignupedUser) {
            // signup first
            // then wait
        }
        // go to miniextensions portal
        // filter with completed orders
        // redirect or embed
    }

</script>
</html>